# COA2020

## 1.å®éªŒè¦æ±‚

### 1.1 Fetch

åœ¨Cacheç±»ä¸­å®ç°fetchæ–¹æ³•å°†æ•°æ®ä»å†…å­˜è¯»åˆ°Cache(å¦‚æœè¿˜æ²¡æœ‰åŠ è½½åˆ°Cache)ï¼Œå¹¶è¿”å›è¢«æ›´æ–°çš„Cacheè¡Œçš„è¡Œå·(éœ€è¦è°ƒç”¨ä¸åŒçš„æ˜ å°„ç­–ç•¥å’Œæ›¿æ¢ç­–ç•¥)

``` java
 String fetch(String sAddr, int len);
```

### 1.2 Write

åœ¨Cacheç±»ä¸­å®ç°writeæ–¹æ³•

```java
void write(String eip, int len, char[] data);
```

### 1.3 Strategy

å®ç°æ˜ **ç»„å…³è”æ˜ å°„**ç­–ç•¥ã€**å…ˆè¿›å…ˆå‡º**æ›¿æ¢ç­–ç•¥ã€**WriteBack**å†™ç­–ç•¥

## 2.ç›¸å…³èµ„æ–™

### è®¾è®¡æ¨¡å¼

æˆ‘ä»¬ç»™å‡ºäº†æ˜ å°„ç­–ç•¥ã€æ›¿æ¢ç­–ç•¥ã€å†™ç­–ç•¥çš„æŠ½è±¡ç±»ã€‚è™½ç„¶æˆ‘ä»¬åªè¦æ±‚å®ç°éƒ¨åˆ†çš„ç­–ç•¥ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶é‡‡ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼Œè¿™æ ·å¦‚æœå¤§å®¶å¯¹å®ç°åˆ«çš„ç­–ç•¥æ„Ÿå…´è¶£ï¼Œåªéœ€è¦å®ç°ç›¸åº”çš„æ¥å£ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å…¶ä»–çš„ä»£ç ã€‚

#### ç­–ç•¥æ¨¡å¼

ä»¥æ›¿æ¢ç­–ç•¥ä¸ºä¾‹ï¼Œå¦‚æœä¸ä½¿ç”¨æ¥å£ï¼Œè€Œæ˜¯ç›´æ¥å®ç°ä¸€ä¸ªå…·ä½“çš„`FIFOReplacement`ç±»ï¼Œé‚£ä¹ˆåœ¨Cacheçš„ä»£ç ä¸­ï¼Œæ‰€æœ‰ç±»å‹ä¸º`ReplacementStrategy`çš„å­—æ®µå…¶å®å¤´å¯ä»¥æ›¿æ¢æˆ`FIFOReplacement`ï¼Œä½†æ˜¯è¿™æ ·ä»£ç çš„æ‹“å±•æ€§ã€å¯ä¿®æ”¹æ€§å°±æ¯”è¾ƒå·®ã€‚å› ä¸ºå¦‚æœæˆ‘ä»¬è¦æ±‚å¤§å®¶å®ç°å…¶ä»–çš„ç­–ç•¥ï¼Œæ¯”å¦‚`LRU`ï¼Œé‚£ä¹ˆä½ ä¸ä»…è¦å»å®ç°ä¸€ä¸ªæ–°çš„`LRUReplacement`ç±»ï¼Œè¿˜è¦ä¿®æ”¹å…¶ä»–åœ°æ–¹çš„ä»£ç ï¼Œä¸åŒç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ä¼šå¢åŠ ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡**åªå¢åŠ ä»£ç è€Œä¸ä¿®æ”¹ä»£ç **æ¥å¯¹ç³»ç»Ÿè¿›è¡Œæ‹“å±•ï¼Œ**é«˜å†…èšã€ä½è€¦åˆ**æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ã€‚

> è€¦åˆå¯ä»¥å®Œå…¨æ¶ˆé™¤å—ï¼Ÿä¸å¯ä»¥ï¼Œåªè¦å­˜åœ¨å¼•ç”¨ï¼Œå°±ä¼šå­˜åœ¨è€¦åˆã€‚å½“ç„¶ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡IOCæ¥è¿›ä¸€æ­¥çš„é™ä½è€¦åˆï¼Œä¸è¿‡è¿™å·²ç»è¶…å‡ºäº†æœ¬é—¨è¯¾ä»¥åŠå®éªŒä¼šæ¶‰åŠçš„èŒƒå›´ã€‚

#### å•ä¾‹æ¨¡å¼

å¤§å®¶éƒ½å†™è¿‡JVMçš„è¯ä¸€å®šçŸ¥é“ç±»åŠ è½½çš„è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œé‚£ä¹ˆå•ä¾‹æ¨¡å¼å°±å¾ˆå¥½ç†è§£äº†ï¼Œæˆ‘ä»¬å°†ç±»çš„æ„é€ æ–¹æ³•ç§æœ‰åŒ–ï¼Œå†æ·»åŠ ä¸€ä¸ªè¯¥ç±»ç±»å‹çš„é™æ€å­—æ®µï¼Œå¯¹äºä½¿ç”¨è¯¥ç±»çš„ä½¿ç”¨è€…ä»¬æ¥è¯´ï¼Œå®ƒä»¬çœ‹åˆ°çš„æ°¸è¿œæ˜¯ç›¸åŒçš„å¯¹è±¡ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Ÿå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†OOç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯åœ¨çœŸå®çš„è®¡ç®—æœºç³»ç»Ÿå½“ä¸­ï¼Œå¾ˆå¤šéƒ¨ä»¶éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡å•ä¾‹æ¨¡å¼æ¥ä¿è¯ä¸»å­˜ã€CPUã€Cacheç­‰çš„å”¯ä¸€æ€§ã€‚å¤§å®¶ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…å·§å¦™ä½¿ç”¨é™æ€å­—æ®µå®ç°ä¸€ä¸ªCPUä¸­çš„å¯„å­˜å™¨æ¨¡å‹ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„unionã€‚

```java
public A{
  
  	private A() {}
		private static A a = new A();
  	public static A getA() { return a; }
  
}
```

### é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨

![image-20201112233657063](https://pkun.oss-cn-beijing.aliyuncs.com/uPic/WJ0Edi.png)

åœ¨ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå¦‚æœæœ‰$m$æ¡åœ°å€çº¿ï¼Œæˆ‘ä»¬å°±èƒ½æ„æˆ$2^m$ä¸ªä¸åŒçš„åœ°å€ï¼Œç”±äºCPUå’Œä¸»å­˜ä¹‹é—´çš„æ€§èƒ½å·®è·ä¸æ–­å¢å¤§ï¼Œè®¾è®¡è€…å¼•å…¥äº†ä¸€ä¸ªé«˜é€Ÿç¼“å­˜å™¨ï¼Œåœ¨æ»¡è¶³æŸäº›æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œå®ƒå¯ä»¥æœ‰æ•ˆçš„æé«˜è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ã€‚è¿™æ˜¯å¾—ç›Šäºç¨‹åºçš„å±€éƒ¨æ€§ã€‚ç›®å‰å¤§éƒ¨åˆ†è®¡ç®—æœºç³»ç»Ÿçš„å­˜å‚¨ç»“æ„ä»¥åŠæ€§èƒ½å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚

ä¸€èˆ¬æ€§çš„ï¼Œä¸€ä¸ªCacheå¯ä»¥ç”±ä¸€ä¸ªå››å…ƒç»„ç»„æˆ$(S, E, B, m)$ï¼Œ$S$è¡¨ç¤º$Cache$çš„ç»„æ•°ï¼Œ$E$è¡¨ç¤ºæ¯ç»„çš„è¡Œæ•°ï¼Œ$B$è¡¨ç¤ºæ¯è¡Œèƒ½è¡¨ç¤ºå¤šå°‘ä¸ªå­—èŠ‚ï¼Œ$m$åˆ™æ˜¯ç‰©ç†åœ°å€çš„é•¿åº¦ã€‚

è¿™ç§å±‚æ¬¡æ€§çš„å­˜å‚¨ç­–ç•¥åº”ç”¨åœºæ™¯éå¸¸çš„å¹¿æ³›ã€‚æ‹¿å¤§å®¶ä¸‹å­¦æœŸä¼šå­¦ä¹ çš„è½¯å·¥äºŒæ¥è¯´ï¼Œåœ¨æ„å»ºä¸€ä¸ªWebåç«¯ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€æ˜¯ä»å…³ç³»å‹æ•°æ®åº“ä¸­è¯»å–ä¿¡æ¯ï¼Œæ¯”å¦‚Mysqlã€‚ä½†æ˜¯Mysqlçš„æ•°æ®é»˜è®¤éƒ½æ˜¯ä»¥Bæ ‘æˆ–è€…B+æ ‘çš„ç»“æ„å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ï¼Œå¤šæ¬¡è®¿é—®ç£ç›˜ä¸ä»…å¯»é“ã€å®šä½æ‰‡åŒºé€Ÿåº¦ç¼“æ…¢ï¼Œè¿˜ä¼šç£ç›˜IOçš„å¸¦å®½æœ‰ä¸€å®šçš„è¦æ±‚ã€‚ä¸è¿‡ç°åœ¨Mysqlå’Œå…¶ä»–æ•°æ®åº“å¾€å¾€è‡ªå¸¦ç¼“å­˜æœºåˆ¶ï¼Œå¦‚æœä¸¤æ¬¡æŸ¥è¯¢è¯­å¥æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¿”å›æ•°æ®ã€‚åŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç±»ä¼¼Redisæˆ–è€…MemoryCacheè¿™æ ·çš„ä¸­é—´ä»¶æ¥å°†æ•°æ®å­˜åˆ°å†…å­˜ä¹‹ä¸­ï¼ŒåŠ é€Ÿè®¿é—®ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä½¿ç”¨Redisï¼Œé‚£ä¹ˆæ€§èƒ½çš„ç“¶é¢ˆå°±ä¸æ˜¯æ•°æ®å­˜å‚¨è€Œæ˜¯è¿›ç¨‹é€šä¿¡æˆ–è€…ç½‘è·¯é˜»å¡äº†ã€‚

## 3.å®éªŒæ”»ç•¥

è¯·è®¤çœŸé˜…è¯»ä»»è€å¸ˆçš„PPTï¼Œä»»ä½•ä¸å…·ä½“å®ç°ç›¸å…³çš„çŸ¥è¯†åº”è¯¥å·²ç»ä½“ç°åœ¨PPTä¹‹ä¸­äº†ï¼ŒREADMEé‡Œé¢åªä¼šæ¶‰åŠè¯¾å ‚ä¹‹å¤–çš„å†…å®¹ã€‚å¦å¤–ï¼Œä¸ºäº†é™ä½å®éªŒéš¾åº¦ï¼Œæˆ‘ä»¬ä¸è¦æ±‚å¤§å®¶å®ç°æ‰€æœ‰çš„æ›¿æ¢ç­–ç•¥ï¼Œåªéœ€è¦å®ç°FIFOå³å¯ã€‚

##### æ•°æ®ç»“æ„

CacheLineè¡¨ç¤ºCacheä¸­çš„ä¸€è¡Œï¼ŒCacheLinePoolå°±æ˜¯è¡Œçš„é›†åˆ

```java
	private class CacheLine {
		// æœ‰æ•ˆä½ï¼Œæ ‡è®°è¯¥æ¡æ•°æ®æ˜¯å¦æœ‰æ•ˆ
		boolean validBit = false;
		// è„ä½ï¼Œæ ‡è®°è¯¥æ¡æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹
		boolean dirty = false;
		// ç”¨äºLFUç®—æ³•ï¼Œè®°å½•è¯¥æ¡cacheä½¿ç”¨æ¬¡æ•°
		int visited = 0;

		// ç”¨äºLRUå’ŒFIFOç®—æ³•ï¼Œè®°å½•è¯¥æ¡æ•°æ®æ—¶é—´æˆ³
		Long timeStamp = 0l;

		// æ ‡è®°ï¼Œå ä½é•¿åº¦ä¸º()22ä½ï¼Œæœ‰æ•ˆé•¿åº¦å–å†³äºæ˜ å°„ç­–ç•¥ï¼š
		// ç›´æ¥æ˜ å°„: 12 ä½
		// å…¨å…³è”æ˜ å°„: 22 ä½
		// (2^n)-è·¯ç»„å…³è”æ˜ å°„: 22-(10-n) ä½
		// æ³¨æ„ï¼Œtagåœ¨ç‰©ç†åœ°å€ä¸­ç”¨é«˜ä½è¡¨ç¤ºï¼Œå¦‚ï¼šç›´æ¥æ˜ å°„(32ä½)=tag(12ä½)+è¡Œå·(10ä½)+å—å†…åœ°å€(10ä½)ï¼Œ
		// é‚£ä¹ˆå¯¹äºå€¼ä¸º0b1111çš„tagåº”è¯¥è¡¨ç¤ºä¸º0000000011110000000000ï¼Œå…¶ä¸­å‰12ä½ä¸ºæœ‰æ•ˆé•¿åº¦ï¼Œ
		// å› ä¸ºæµ‹è¯•å¹³å°çš„åŸå› ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨4GBçš„å†…å­˜ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯é€‰æ‹©ç”¨32ä½åœ°å€çº¿æ¥å¯»å€
		char[] tag = new char[22];
		// æ•°æ®
		char[] data = new char[LINE_SIZE_B];
	}
```

```java
private class CacheLinePool {
   /**
    * @param lines Cacheçš„æ€»è¡Œæ•°
    */
   CacheLinePool(int lines) {
      clPool = new CacheLine[lines];
   }
   private CacheLine[] clPool;
}
```

ç”±äºç»„å…³è”æ˜ å°„å¯ä»¥å®ç°ç›´æ¥æ˜ å°„å’Œå…³è”æ˜ å°„çš„æ•ˆæœï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­è°ƒç”¨äº†setæ–¹æ³•æ¥è®©ç»„å…³è”è¾¾åˆ°äº†ç›´æ¥æ˜ å°„å’Œå…³è”æ˜ å°„çš„æ•ˆæœï¼Œè¯·å¤§å®¶ä¸è¦éšæ„ä¿®æ”¹ï¼Œä½œä¸šä¸­é»˜è®¤æ˜¯256ä¸ªç»„ï¼Œæ¯ç»„4è¡Œï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å°è¯•å…¶ä»–çš„ç»„åˆç­–ç•¥ï¼Œä½†æ˜¯å¯¹æµ‹è¯•çš„æ—¶é—´ä¸ä¼šäº§ç”Ÿå¤ªå¤§çš„å½±å“ã€‚

> åœ¨é’ˆå¯¹ç»„å…³è”Cacheè¯»æ•°æ®æ˜¯å¦æ­£ç¡®çš„æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨Setæ–¹æ³•ä¿®æ”¹å¤§å®¶çš„SETå’ŒsetSize

```java
public class SetAssociativeMapping extends MappingStrategy{

    private int SETS=256; 		// å…±256ä¸ªç»„
    private int setSize=4;   // æ¯ä¸ªç»„4è¡Œ
}
```

ä»£ç æ¡†æ¶å¹¶ä¸æ˜¯å·²ç»é’‰æ­»çš„ä¸œè¥¿ï¼ŒåŒå­¦ä»¬éœ€è¦è‡ªå·±å¯¹æ•°æ®ç»“æ„å’Œæ–¹æ³•è¿›è¡Œ**ä¿®æ”¹å’Œè¡¥å……**ã€‚

#### æºç é˜…è¯»

æ•…äº‹è¦ä»$Cache$çš„è¯»å†™å¼€å§‹è¯´èµ·ã€‚ç”±äº$Cache$éœ€è¦è¿›è¡Œåˆ†å—è¯»å†™ï¼Œæ‰€ä»¥æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª`helper`å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å·²ç»å†™å¥½äº†ï¼Œä»–åšçš„äº‹æƒ…å°±æ˜¯åˆ†å—è¯»å†™ï¼Œç„¶åæ ¹æ®å‚æ•°æ¥åˆ¤æ–­ç©¶ç«Ÿæ˜¯è¯»è¿˜æ˜¯å†™ã€‚åœ¨`helper`ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†`fetch`å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ£€æŸ¥$Cache$æ˜¯å¦åŒ…å«æŸä¸€ä¸ªç‰¹å®šçš„$block$ï¼Œå¦‚æœæ£€æŸ¥åˆ°äº†å°±ä¼šè¿”å›ï¼Œæ²¡æœ‰æ£€æŸ¥åˆ°å°±ä¼šä»å†…å­˜ä¸­åŠ è½½ã€‚å› ä¸ºæˆ‘ä»¬åªéœ€è¦å®ç°ä¸€ç§æ›¿æ¢ç­–ç•¥ï¼Œæ‰€ä»¥è¿™é‡Œä½ å¯ä»¥ç¡¬ç¼–ç ä¸€ä¸ª`FIFO`è¿›å»ï¼Œå¯¹äºæ˜ å°„ç­–ç•¥æ¥è¯´ï¼Œæœ¬è´¨ä¸Šåªæœ‰ä¸€ç§æ˜ å°„ç­–ç•¥ã€‚

```java
	private char[] helper(String eip, int len, char[] writeData){
		char[] data = new char[len];
		Transformer t = new Transformer();
		int addr =  Integer.parseInt(t.binaryToInt("0" + eip));
		int upperBound = addr + len;
		int index = 0;
		while (addr < upperBound) {
			int nextSegLen = LINE_SIZE_B - (addr % LINE_SIZE_B);
			if (addr + nextSegLen >= upperBound) {
				nextSegLen = upperBound - addr;
			}
			int i=0;
			if(writeData == null){
				int rowNO = fetch(t.intToBinary(String.valueOf(addr)), nextSegLen);
				char[] cache_data = cache.get(rowNO).getData();
				while (i < nextSegLen) {
					data[index] = cache_data[addr % LINE_SIZE_B + i];
					index++;
					i++;
				}
			}
			else{
				int rowNO = fetch(t.intToBinary(String.valueOf(addr)), nextSegLen);
				char[] input = new char[LINE_SIZE_B];
				Arrays.fill(input, '0');
				while (i < nextSegLen) {
					input[addr % LINE_SIZE_B + i] = writeData[index];
					index++;
					i++;
				}
				writeStrategy.write(rowNO, input);
			}
			addr += nextSegLen;
		}
		return data;
	}
```

è¯·åŒå­¦ä»¬ç¼–ç ä¹‹å‰ä»”ç»†é˜…è¯»è¿™æ®µä»£ç ï¼Œè¿™ä¼šå¸®åŠ©ä½ ç†è§£æ•´ä¸ª$Cache$è¿è¡Œçš„æµç¨‹ï¼Œä¹Ÿä¼šå¸®åŠ©ä½ è¿›è¡Œç¼–ç ã€‚

#### å†™å›

å¦‚æœåªæ˜¯è¯»æ•°æ®ï¼Œé‚£ä¹ˆæœ¬æ¬¡ä½œä¸šå°±éå¸¸çš„ç®€å•ï¼Œä½†æ˜¯åŠ å…¥äº†å†™æ•°æ®çš„å†…å®¹åï¼Œä¸€åˆ‡éƒ½å˜çš„å¤æ‚äº†èµ·æ¥ï¼Œåœ¨è™šå­˜çš„ç« èŠ‚ï¼Œå¤§å®¶ä¼šäº†è§£åˆ°$Cacheã€Memoryã€Disk$ä¹‹é—´å­˜åœ¨ä¸€å®šçš„ä¸€è‡´æ€§ï¼Œä¼šä¸ä¼šå‡ºç°$Cache$è¢«ä¿®æ”¹äº†ï¼Œä¸»å­˜ä¹Ÿè¢«ä¿®æ”¹äº†ï¼Œä½†æ˜¯ä¸¤æ¬¡ä¿®æ”¹çš„æ•°æ®ä¸ä¸€æ ·å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™è¯¥ä»¥å“ªä¸€ä»½æ•°æ®ä¸ºå‡†å‘¢ï¼Ÿå½“ç„¶ï¼Œåœ¨æœ¬æ¬¡ä½œä¸šä¸­ï¼Œé™¤äº†æµ‹è¯•éœ€è¦ï¼Œæˆ‘ä»¬ä¸ä¼šä¸»åŠ¨ä¿®æ”¹ä¸»å­˜ï¼Œé‚£ä¹ˆè¿™æ„å‘³ç€ä¸»å­˜åªä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹ä¿®æ”¹

- æµ‹è¯•éœ€è¦
- $Cache$å†™å›

æœ¬æ¬¡ä½œä¸šä¸­ä¹Ÿåªæœ‰ä¸€ä¸ªåœ°æ–¹ä¼š$Cache$å¯¹å†…å­˜çš„å†™å›ã€‚å¯¹äºå†™å›æ¥è¯´ï¼Œéœ€è¦åœ¨$CacheLine$ä¸­æ·»åŠ ä¸€ä¸ªè„ä½æ¥è¡¨ç¤ºè¿™ä¸ªæ•°æ®æ˜¯å¦å·²ç»è¢«ä¿®æ”¹è¿‡äº†ã€‚è„ä½å’ŒValidBitåœ¨æµ‹è¯•ä¸­ä¹Ÿä¼šè¢«æµ‹è¯•ï¼Œè¿™ä¸¤ä¸ªBitä¹‹é—´æ˜¯å­˜åœ¨ä¸€å®šçš„çº¦æŸçš„ã€‚**å†™å›çš„æ—¶å€™å¦‚æœæ•°æ®æ²¡æ»¡ä¸€è¡Œï¼Œè¯·ä¸è¦è¡¥0è¡¥æ»¡ä¸€è¡Œ**

#### æµ‹è¯•

è™½ç„¶åªéœ€è¦å®ç°1 * 1 * 1 = 1ç§ç­–ç•¥ï¼Œä½†æ˜¯å¯¹äºç»„å…³è”æ¥è¯´ï¼Œä»–çš„Setå’ŒSetSizeå¯ä»¥è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æµ‹è¯•ä¸­è¿˜æ˜¯è°ƒç”¨äº†`cache.setStrategy`æ–¹æ³•æ¥è®¾ç½®ä¸åŒçš„ç­–ç•¥ï¼Œæˆ‘ä»¬ä¼šæ£€æŸ¥è®¿é—®ç‰¹å®šè¡Œæ˜¯å¦è¾“å‡ºäº†æ­£ç¡®çš„æ•°æ®ï¼Œæˆ–è€…è®¿é—®ç‰¹å®šçš„è¡Œæ£€æŸ¥å®ƒçš„Tagã€‚æˆ‘ä»¬ä¹Ÿä¼šæ£€æŸ¥ä¸åŒæ—¶åˆ»$Cache$å’Œ$Memory$ä¸­çš„æ•°æ®æ˜¯å¦æ­£ç¡®ç­‰ã€‚

#### ç¼–ç  ğŸ˜ˆ

ä¸ºäº†å‡è½»å¤§å®¶çš„è´Ÿæ‹…ï¼Œæˆ‘ä»¬å½’çº³äº†æœ¬æ¬¡ä½œä¸šä¸­ä½ éœ€è¦å®Œæˆçš„å°ä»»åŠ¡ä»¥åŠæ­¥éª¤

- å®ç°å¥½æ›¿æ¢ç­–ç•¥å’Œæ˜ å°„ç­–ç•¥
- åœ¨$Cache$ä¸­åˆå§‹åŒ–å¥½æ›¿æ¢ç­–ç•¥å’Œæ˜ å°„ç­–ç•¥
- ç¼–å†™å¥½`fetch`

åˆ°æ­¤ä¸ºæ­¢ï¼Œå¦‚æœä½ çš„ä»£ç æ­£ç¡®ï¼Œä½ åº”è¯¥å¯ä»¥é€šè¿‡æ‰€æœ‰è¯»ç”¨ä¾‹

- å®ç°å†™å›æ“ä½œç›¸å…³çš„ä»£ç 

åˆ°æ­¤ä¸ºæ­¢ï¼Œå¦‚æœä½ çš„ä»£ç æ­£ç¡®ï¼Œä½ åº”è¯¥å¯ä»¥é€šè¿‡æ‰€æœ‰å†™ç”¨ä¾‹

#### å½©è›‹

åœ¨æœ€åä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå°†ä¸€æ®µç‰¹å®šçš„ä¿¡æ¯å†™å…¥$Cache$ï¼Œè¿™æ®µä¿¡æ¯è¡¨æ˜äº†ä¸€ä¸²æ•°æ®çš„ä½ç½®ï¼Œè¿™ä¸²æ•°æ®è¢«è¿›è¡Œäº†åŠ å¯†ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ã€‚æŠŠä½ è§£å¯†å®Œçš„ä¿¡æ¯å­˜åˆ°$Cache$ä¸­ï¼Œä¿æŒåœ°å€ä¸å˜ï¼Œæˆ‘ä»¬ä¼šæ£€æŸ¥ä¿¡æ¯æ˜¯å¦è¢«æ­£ç¡®çš„ç¿»è¯‘äº†ã€‚å¦‚æœæ•°æ®è¢«ä¿®æ”¹ä½†æ˜¯é”™è¯¯ï¼Œä½ å°†ä¸ä¼šé€šè¿‡è¿™ä¸ªæµ‹è¯•ï¼Œå¦‚æœä½ å¾—åˆ°äº†æ­£ç¡®çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆä½ ä¼šé€šè¿‡æµ‹è¯•ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸€æ ·ä¼šé€šè¿‡æµ‹è¯•~GOOD LUCK HAVE FUNï¼

> æ³¨æ„ï¼šå¦‚æœä½ ä¸æƒ³åšå½©è›‹å´ä¸å°å¿ƒä¿®æ”¹äº†æŸäº›å’Œå½©è›‹ç›¸å…³çš„å†…å®¹ä¼šå¯¼è‡´æœ€åçš„è¯„åˆ†ä¸æ˜¯æ»¡åˆ†

## 4.ä»£ç æ¡†æ¶

```java
.
â”œâ”€â”€ README.md    # This File
â”œâ”€â”€ pom.xml      # Maven Config File
â””â”€â”€ src          
    â””â”€â”€ main
    Â Â  â””â”€â”€ java
    Â Â      â”œâ”€â”€ memory
    Â Â      â”‚Â Â  â”œâ”€â”€ Cache.java												# Cacheä»£ç 
    Â Â      â”‚Â Â  â”œâ”€â”€ Memory.java 											# ä¸»å­˜ï¼Œè¿™æ¬¡ä½œä¸šä¸éœ€è¦ä¿®æ”¹
    Â Â      â”‚Â Â  â”œâ”€â”€ MemoryInterface.java							# ä¸»å­˜æ¥å£
    Â Â      â”‚Â Â  â”œâ”€â”€ cacheMappingStrategy							# æ˜ å°„ç­–ç•¥
    Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MappingStrategy.java
    Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ SetAssociativeMapping.java
    Â Â      â”‚Â Â  â”œâ”€â”€ cacheReplacementStrategy         # æ›¿æ¢ç­–ç•¥
    Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ FIFOReplacement.java
    Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ ReplacementStrategy.java
    Â Â      â”‚Â Â  â””â”€â”€ cacheWriteStrategy								# å†™å›ç­–ç•¥
    Â Â      â”‚Â Â      â”œâ”€â”€ WriteBackStrategy.java
    Â Â      â”‚Â Â      â””â”€â”€ WriteStrategy.java
    Â Â      â”œâ”€â”€ transformer
    Â Â      â”‚Â Â  â””â”€â”€ Transformer.java
    Â Â      â””â”€â”€ util
    Â Â          â”œâ”€â”€ BinaryIntegers.java
    Â Â          â””â”€â”€ IEEE754Float.java

```

## 5.æœªå°½äº‹å®œ

è¯·å†™é‚®ä»¶ç»™ä»»è€å¸ˆ

